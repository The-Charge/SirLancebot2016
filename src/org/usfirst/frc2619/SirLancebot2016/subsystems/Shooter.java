// RobotBuilder Version: 2.0
//
// This file was generated by RobotBuilder. It contains sections of
// code that are automatically generated and assigned by robotbuilder.
// These sections will be updated in the future when you export to
// Java from RobotBuilder. Do not put any code or make any change in
// the blocks indicating autogenerated code or it will be lost on an
// update. Deleting the comments indicating the section will prevent
// it from being updated in the future.


package org.usfirst.frc2619.SirLancebot2016.subsystems;

import org.usfirst.frc2619.TheChargeDashboard;
import org.usfirst.frc2619.SirLancebot2016.Robot;
import org.usfirst.frc2619.SirLancebot2016.RobotMap;
import org.usfirst.frc2619.SirLancebot2016.commands.*;

import edu.wpi.first.wpilibj.CANTalon;

import edu.wpi.first.wpilibj.CANTalon.TalonControlMode;

import edu.wpi.first.wpilibj.DoubleSolenoid;

import edu.wpi.first.wpilibj.command.Subsystem;
import edu.wpi.first.wpilibj.smartdashboard.SmartDashboard;


/**
 *
 */
public class Shooter extends Subsystem {

	private final static double SPEED_P_CONSTANT = .75;
    private final static double SPEED_I_CONSTANT = .01;
    private final static double SPEED_D_CONSTANT = 0;
    public double speed = .8;
    
    double SpeedP = SPEED_P_CONSTANT;
    double SpeedI = SPEED_I_CONSTANT;
    double SpeedD = SPEED_D_CONSTANT;
    // BEGIN AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=CONSTANTS

    // END AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=CONSTANTS

    // BEGIN AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=DECLARATIONS
    private final CANTalon shooterTop = RobotMap.shooterShooterTop;
    private final CANTalon shooterBottom = RobotMap.shooterShooterBottom;
    private final DoubleSolenoid shooterPosition = RobotMap.shooterShooterPosition;
    private final CANTalon leftCollector = RobotMap.shooterLeftCollector;
    private final CANTalon rightCollector = RobotMap.shooterRightCollector;

    // END AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=DECLARATIONS


    // Put methods for controlling this subsystem
    // here. Call these from Commands.
    public Shooter()
    {
    	writeDefaultDashboardValues();
    	initSpeedMode();
    }

    public void initDefaultCommand() {
        // BEGIN AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=DEFAULT_COMMAND


    // END AUTOGENERATED CODE, SOURCE=ROBOTBUILDER ID=DEFAULT_COMMAND

        // Set the default command for a subsystem here.
        // setDefaultCommand(new MySpecialCommand());
    }
    
    private void writeDefaultDashboardValues() {
    	TheChargeDashboard.putNumber("ShooterSpeedP", SPEED_P_CONSTANT);
    	TheChargeDashboard.putNumber("ShooterSpeedI", SPEED_I_CONSTANT);
    	TheChargeDashboard.putNumber("ShooterSpeedD", SPEED_D_CONSTANT);
    	TheChargeDashboard.putNumber("ShooterSpeedFromPot", speed);
	}
    
    public void readDashboardControlValues()
    {
    	SpeedP = SmartDashboard.getNumber("ShooterSpeedP");
    	SpeedI = SmartDashboard.getNumber("ShooterSpeedI");
    	SpeedD = SmartDashboard.getNumber("ShooterSpeedD");
    	
    	//set CANTalon PIDs
    	shooterTop.setPID(SpeedP, SpeedI,SpeedD);
    	shooterBottom.setPID(SpeedP,SpeedI,SpeedD);	
    	
    	speed = SmartDashboard.getNumber("ShooterSpeedFromPot");
    }
    
    public void writeDashboardDebugValues()
	{
		//Output Speed of Encoders
		TheChargeDashboard.putNumber("ShooterTopSpeed",shooterTop.getEncVelocity());
		TheChargeDashboard.putNumber("ShooterBottomSpeed",shooterBottom.getEncVelocity());
		
		TheChargeDashboard.putNumber("ShooterSpeedFromPot", Robot.oi.dragon.getX());
	}
    
    private void initSpeedMode()
    {
    	shooterTop.setControlMode(CANTalon.TalonControlMode.Speed.getValue());
    	shooterBottom.setControlMode(CANTalon.TalonControlMode.Speed.getValue());
    }
    
    public void shoot(double speed)
    {
    	shooterTop.set(speed);
    	shooterBottom.set(speed);
    }
    
    public void intake(double speed)
    {
    	shooterTop.set(-speed);
    	shooterBottom.set(-speed);
    	leftCollector.set(speed);
    	rightCollector.set(speed);
    }
    
    public void upPosition()
    {
    	shooterPosition.set(DoubleSolenoid.Value.kForward);
    }
    
    public void downPosition()
    {
    	shooterPosition.set(DoubleSolenoid.Value.kReverse);
    }
    
    public void off()
    {
    	shooterTop.set(0);
    	shooterBottom.set(0);
    }
    
    public void initPercentVBusMode(){
    	setControlMode(TalonControlMode.PercentVbus.getValue());
    	readDashboardControlValues();
    	
    	shooterTop.configMaxOutputVoltage(12);
    	shooterBottom.configMaxOutputVoltage(12);
    }
    
    private void setControlMode(int controlmode) {
		//setContronlMode
    	shooterTop.setControlMode(controlmode);
    	shooterBottom.setControlMode(controlmode);
	}
}

